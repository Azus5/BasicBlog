{"ast":null,"code":"var _jsxFileName = \"/home/abnerferrante/Documentos/TestesRails/frontend/src/pages/Home/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport './styles.css';\nexport default function Home() {\n  const history = useHistory();\n  useEffect(() => {\n    axios.get('http://localhost:3000/logged_in', {\n      withCredentials: true\n    }).then(response => {\n      if (response.data.logged_in) {\n        handleLogin(response);\n      } else {\n        handleLogout();\n      }\n    }).catch(error => console.log('Logged in Error:', error.message));\n  }, []);\n\n  function handleLogin(data) {\n    localStorage.setItem('userLogged', 'logged');\n    localStorage.setItem('userData', JSON.stringify(data.user));\n  }\n\n  function handleLogout() {\n    localStorage.removeItem('userLogged');\n    localStorage.removeItem('userData');\n  }\n\n  function handleClick() {\n    axios.delete('http://localhost:3000/logout', {\n      withCredentials: true\n    }).then(response => {\n      handleLogout();\n      history.push('/');\n    }).catch(err => console.log('Error: ' + err.message));\n  }\n\n  function userAuthenticated() {\n    let userLogged = localStorage.getItem('userLogged');\n\n    if (userLogged === 'logged') {\n      const userData = JSON.parse(localStorage.getItem('userData'));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }\n      }, \"Bem vindo! \", userData.username), /*#__PURE__*/React.createElement(Link, {\n        to: \"/logout\",\n        onClick: () => handleClick(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }\n      }, \"Log Out\"));\n    } else return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, \"Header\"), /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, \"Main\"));\n}","map":{"version":3,"sources":["/home/abnerferrante/Documentos/TestesRails/frontend/src/pages/Home/index.js"],"names":["React","useEffect","useState","Link","useHistory","axios","Home","history","get","withCredentials","then","response","data","logged_in","handleLogin","handleLogout","catch","error","console","log","message","localStorage","setItem","JSON","stringify","user","removeItem","handleClick","delete","push","err","userAuthenticated","userLogged","getItem","userData","parse","username"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,cAAP;AAGA,eAAe,SAASC,IAAT,GAAgB;AAC7B,QAAMC,OAAO,GAAGH,UAAU,EAA1B;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACdI,IAAAA,KAAK,CAACG,GAAN,CAAU,iCAAV,EAA6C;AAAEC,MAAAA,eAAe,EAAE;AAAnB,KAA7C,EACGC,IADH,CACQC,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAACC,IAAT,CAAcC,SAAlB,EAA6B;AAC3BC,QAAAA,WAAW,CAACH,QAAD,CAAX;AACD,OAFD,MAEO;AACLI,QAAAA,YAAY;AACb;AACF,KAPH,EAQGC,KARH,CAQSC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCF,KAAK,CAACG,OAAtC,CARlB;AASD,GAVQ,EAUN,EAVM,CAAT;;AAYA,WAASN,WAAT,CAAqBF,IAArB,EAA2B;AACzBS,IAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmC,QAAnC;AACAD,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCC,IAAI,CAACC,SAAL,CAAeZ,IAAI,CAACa,IAApB,CAAjC;AACD;;AAED,WAASV,YAAT,GAAwB;AACtBM,IAAAA,YAAY,CAACK,UAAb,CAAwB,YAAxB;AACAL,IAAAA,YAAY,CAACK,UAAb,CAAwB,UAAxB;AACD;;AAED,WAASC,WAAT,GAAuB;AACrBtB,IAAAA,KAAK,CAACuB,MAAN,CAAa,8BAAb,EAA6C;AAAEnB,MAAAA,eAAe,EAAE;AAAnB,KAA7C,EACGC,IADH,CACQC,QAAQ,IAAI;AAChBI,MAAAA,YAAY;AACZR,MAAAA,OAAO,CAACsB,IAAR,CAAa,GAAb;AACD,KAJH,EAIKb,KAJL,CAIWc,GAAG,IAAIZ,OAAO,CAACC,GAAR,CAAY,YAAYW,GAAG,CAACV,OAA5B,CAJlB;AAKD;;AAED,WAASW,iBAAT,GAA6B;AAC3B,QAAIC,UAAU,GAAGX,YAAY,CAACY,OAAb,CAAqB,YAArB,CAAjB;;AAEA,QAAGD,UAAU,KAAK,QAAlB,EAA4B;AAC1B,YAAME,QAAQ,GAAGX,IAAI,CAACY,KAAL,CAAWd,YAAY,CAACY,OAAb,CAAqB,UAArB,CAAX,CAAjB;AACA,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAgBC,QAAQ,CAACE,QAAzB,CADF,eAEE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC,SAAT;AAAmB,QAAA,OAAO,EAAE,MAAMT,WAAW,EAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFF,CADF;AAMD,KARD,MAQO,OAAO,IAAP;AACR;;AAED,sBACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,CADF;AAMD","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport axios from 'axios';\n\nimport './styles.css'\n\n\nexport default function Home() {\n  const history = useHistory();\n\n  useEffect(() => {\n    axios.get('http://localhost:3000/logged_in', { withCredentials: true })\n      .then(response => {\n        if (response.data.logged_in) {\n          handleLogin(response)\n        } else {\n          handleLogout()\n        }\n      })\n      .catch(error => console.log('Logged in Error:', error.message))\n  }, [])\n\n  function handleLogin(data) {\n    localStorage.setItem('userLogged', 'logged');\n    localStorage.setItem('userData', JSON.stringify(data.user));\n  }\n\n  function handleLogout() {\n    localStorage.removeItem('userLogged');\n    localStorage.removeItem('userData');\n  }\n\n  function handleClick() {\n    axios.delete('http://localhost:3000/logout', { withCredentials: true })\n      .then(response => {\n        handleLogout();\n        history.push('/')\n      }).catch(err => console.log('Error: ' + err.message))\n  }\n\n  function userAuthenticated() {\n    let userLogged = localStorage.getItem('userLogged')\n\n    if(userLogged === 'logged') {\n      const userData = JSON.parse(localStorage.getItem('userData'));\n      return(\n        <div>\n          <h3>Bem vindo! {userData.username}</h3>\n          <Link to='/logout' onClick={() => handleClick()}>Log Out</Link>\n        </div>\n      );\n    } else return null\n  }\n\n  return (\n    <div className=\"container\">\n      <header>Header</header>\n      <main>Main</main>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}